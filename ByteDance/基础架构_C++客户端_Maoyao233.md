# 字节跳动面经

+ 部门：产品研发和工程架构
+ 岗位：C++客户端开发
+ 地点：上海

由于本面经写作时间距离面试已经很久了，笔者只能凭印象回忆部分问题，不完整之处还请见谅。

## 笔试

笔试在牛客网上进行，4道编程题，在线实时评测。字节的笔试题在大厂中应该属于最难的一档了，明显比网易雷火、美团等难出一个档次。常见算法应该都在考察范围之内，较难的题目可以达到ICPC区域赛水准。另外，字节面试的时候也非常喜欢考leetcode的hard题，并且根据笔者朋友的反馈，算法题的完成度对于面试通过与否有着很大的影响，因此建议有意投递字节的同学对算法题进行专门的训练。

## 一面

一面印象中以问基础题为主，没有针对简历进行太多提问。主要涉及C++和操作系统的知识。

+ 堆空间与栈空间的区别
+ 变量的生命周期
+ C++怎么做内存管理（malloc/free，new/delete，智能指针）
+ 什么是内存泄漏
+ 如何检测内存泄漏（当时回答了人工分析和编译器检查）
+ 让你写一个防止内存泄漏的机制你会怎么做
    + 面试现场的时候，我的回答是提供给程序员自定义版的`malloc`和`free`，并且额外维护引用计数
    + 后来想了一下，C++可以重载`operator new`，C方式可以给动态库打桩，都能在不影响程序员的情况下去替换掉内存分配/释放的操作
    + 另外还问了我，想让这个报错系统更精准的定位在代码的哪个位置，我说可以用`__LINE__`等宏
+ C++关键字`volatile`是什么意思（在多线程/多进程环境下，防止编译器的过度优化导致错误的语义，但仅靠`volatile`不能保证线程安全，只有在很底层的编程中才会用到，例如信号处理函数、驱动等等）
+ 你说到编译器优化会使得变量的值从寄存器而非内存读取，那每个变量对应一个寄存器不会浪费吗？（编译原理知识，编译器后端的寄存器指派算法）
+ 你说到多进程，进程间通信有哪些方法？
  + 这是个出现频率非常高的问题，被问到过很多很多次
  + UNIX下进程间通信的方法：管道、FIFO、信号、消息队列、信号量（注意与信号的区别）、文件锁、共享内存、UNIX socket
  + 可以参考《UNIX网络编程卷2》，强烈建议熟悉这些知识，最好写一点代码

+ 创建一个线程的时候，发生了什么？
+ 比较一下红黑树和`splay`
+ 比较一下平衡树和哈希表
+ `sizeof(int)`和`sizeof(int*)`是多少？（平台相关）
+ 想问一些计算机网络的知识（我直接说还没学过，不会）
+ 了解ARM汇编吗？岗位可能会用

+ 了解设计模式吗？说几个你比较清楚的
+ 有没有做过移动端开发？

+ 手搓代码：给一个字符串，找出里面最长的不含重复字符的子串（尺取）

## 二面

+ 编译器一般会对代码进行哪些优化？

+ 讲一下分支预测机制

+ 现代计算机的Cache一般有几级，大概有多大？

+ 写程序的时候怎么减少Cache Miss

+ 进程和线程的差异在哪里？（真・必考考点）

+ 熟不熟悉多线程编程？

+ 了解过`malloc`是怎么实现的吗？你认为一个内存分配器需要关注哪些方面的问题？如果让你来设计，你会怎么做？（这个问题追得比较细，让我给出了比较明确的数据结构和算法描述）
  + 其实CSAPP中有一章讲了这个，但是刚好被我跳过了
  + （不过一通胡扯还真的有一些设计到了点子上）

+ 手搓代码：表达式解析

    > 输入一个只包含+、-、*、/和括号、仅有整数的表达式，计算得到其结果。

+ 职业规划，读不读研，什么时候能实习

## 三面

+ 详细问了简历中的项目

+ 谈谈LLVM（我编译大作业是基于LLVM做的）
  
+ C++11的智能指针是怎么实现的？（引用计数）

+ 为什么要有`weak_ptr`？
  
+ 了解垃圾回收吗？讲一讲垃圾回收中的压缩

+ 手写一个垃圾回收（直接麻了，太折磨了，最后也没写清楚，不过还是给我过了）

## HR面

当时字节HR和网易的面试约到了挨在一起的时间点，偏偏字节的HR又迟到了，导致只能赶场子面完。主要是让我讲了讲大学中做的比较有意义的事情，然后问了一些关于我的竞赛经历的事情。还有一些关于职业规划、其他offer之类的问题。

一般来说字节的HR面不怎么会挂人，还没听说过身边有哪位同学倒在HR面的。

## 其他

吐槽一句，大家都说字节跳动的流程很快，可是笔者从2月26日通过内推投递开始，一直拖到4月中旬才收到offer，期间已经拿到了好几家比字节晚投的公司的offer，所以说流程快慢还真的是因人而异。

另外，笔者拒到offer之后，在7月收到了两次字节不同部门HR的秋招提前批邀请，感觉字节在大厂中相对来讲是招人需求比较强烈的那种，机会也比较多。